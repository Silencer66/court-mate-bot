Write-Host "üöÄ –ó–∞–ø—É—Å–∫ Court Mate Bot –≤ –ø—Ä–æ–¥–∞–∫—à–Ω —Ä–µ–∂–∏–º–µ..." -ForegroundColor Green

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ env/production.env —Ñ–∞–π–ª–∞
if (-not (Test-Path "env/production.env")) {
    Write-Host "‚ùå –§–∞–π–ª env/production.env –Ω–µ –Ω–∞–π–¥–µ–Ω!" -ForegroundColor Red
    Write-Host "–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å env/production.env —Å –ø—Ä–æ–¥–∞–∫—à–µ–Ω –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏" -ForegroundColor Yellow
    exit 1
}

# –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
Write-Host "üõë –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã..." -ForegroundColor Yellow
docker-compose -f docker-compose.prod.yml down

# –°–æ–±–∏—Ä–∞–µ–º –∏ –∑–∞–ø—É—Å–∫–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
Write-Host "üî® –°–æ–±–∏—Ä–∞–µ–º –∏ –∑–∞–ø—É—Å–∫–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã..." -ForegroundColor Yellow
docker-compose -f docker-compose.prod.yml up --build -d

# –ñ–¥–µ–º –∑–∞–ø—É—Å–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
Write-Host "‚è≥ –ñ–¥–µ–º –∑–∞–ø—É—Å–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö..." -ForegroundColor Yellow
Start-Sleep -Seconds 15

# –ü—Ä–∏–º–µ–Ω—è–µ–º –º–∏–≥—Ä–∞—Ü–∏–∏ Prisma
Write-Host "üóÑÔ∏è –ü—Ä–∏–º–µ–Ω—è–µ–º –º–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö..." -ForegroundColor Yellow
docker-compose -f docker-compose.prod.yml exec app npx prisma db push

Write-Host "‚úÖ Court Mate Bot –∑–∞–ø—É—â–µ–Ω –≤ –ø—Ä–æ–¥–∞–∫—à–Ω —Ä–µ–∂–∏–º–µ!" -ForegroundColor Green
Write-Host ""
Write-Host "üì± –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ" -ForegroundColor Cyan
Write-Host "üóÑÔ∏è pgAdmin –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞: http://localhost:5050" -ForegroundColor Cyan
Write-Host ""
Write-Host "üìã –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:" -ForegroundColor Yellow
Write-Host "   docker-compose -f docker-compose.prod.yml logs -f app     # –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è" -ForegroundColor White
Write-Host "   docker-compose -f docker-compose.prod.yml logs -f postgres # –õ–æ–≥–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö" -ForegroundColor White
Write-Host "   docker-compose -f docker-compose.prod.yml down            # –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã" -ForegroundColor White
Write-Host "   docker-compose -f docker-compose.prod.yml restart app     # –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ" -ForegroundColor White
